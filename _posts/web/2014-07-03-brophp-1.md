---
layout: post
title: Brophp教程笔记1-后台管理系统
description: ""
categories: [web]
tags: [php]
---

#生成目录结构：[admin.php]
    <?php
	    define("APP", "./admin");
	    require "./brophp/brophp.php"

---
#index模块
由于默认打开路径为：admin.php/index/index (index模块下的index操作)故将后台的主页面放在此路径中。

##index操作
[admin/controls/index.class.php (index)]

根据MVC思想，控制器只需要做流程判断或者图形显示。此处index操作（作为默认操作）只须调用视图模板进行显示。

index操作：

    <?php
        class Index {
            function index(){
                debug(); //临时关闭当前操作的debug
                $this->display();
            }
        } 

##index视图 
[admin/views/default/index]

视图要大众化。由于是后台管理最好使用frame 或者iframe，此处使用frame。

    <html>
        <head>
            <title>管理平台</title>
        </head>

        <frameset rows="100, *">
            <frame src="<{$url}>/top" name="top" scrolling="no" />

            <frameset cols="150, *">
                <frame src="<{$url}>/menu" name="left" />
                <frame src="<{$url}>/main" name="right" />
            </frameset>
        </frameset>
    </html>

其中：
<{url}> 表示当前模块（admin.php/**index**/index）
top,menu,main为其他操作。这意味着index控制器中要新增top,menu,main三个操作分别用来显示后台控制面板的上，左，右区域。

##index模块下的top,menu,main操作 
[admin/controls/index.class.php (top,menu,main)]

仍然是只需要显示视图即可。此时index控制器内容如下[admin/controls/index.class.php (index,top,menu,main)]

    <?php
        class Index {
            function index(){
                debug(); //临时关闭当前操作的debug
                $this->display();
            }

            function top() {
                debug();
                $this->display();
            }

            function menu() {
                debug();
                $this->display();
            }

            function main() {
                $this->display();
            }		
        }

##top,menu,main对应的视图：

[admin/views/default/index/top.tpl]
用于显示导航条：

    <html>
        <head> 
            <title>--未知标题---</title>
        </head>

        <body>
            <center>
                <h1>管理平台</h1>
            </center>

            <a href="<{$url}>/menu/pd/one" target="left"> 频道一 </a> ||
            <a href="<{$url}>/menu/pd/two" target="left"> 频道二 </a> ||
            <a href="<{$url}>/menu/pd/three" target="left"> 频道三 </a> ||
            <a href="<{$url}>/menu/pd/four" target="left"> 频道四 </a> ||
            <a href="<{$url}>/menu/pd/five" target="left"> 频道五 </a> ||
            <a href="<{$url}>/menu/pd/six" target="left"> 频道六 </a> ||
            <a href="<{$url}>/menu/pd/seven" target="left"> 频道七 </a> 
        </body>
    </html>
    
<{$url}>/menu/pd/one 当点击频道一时，会请求当前模块下的menu操作，同时会附带上参数，告诉menu模块我是 pd/one ，用作身份识别

target="left"，用于设定在left框架中显示,参见代码： 

    <frame src="<{$url}>/menu" name="left" />


[admin/views/default/index/menu.tpl]

    <html>
        <head>
            <title> </title>
        </head>

        <body>
            <ul style="list-style:none;margin:0px;padding:0px">
                <{if $smarty.get.pd eq "two"}> 
                    2222222222222<br>
                <{elseif $smarty.get.pd eq "three"}>
                    333333333<br>
                <{elseif $smarty.get.pd eq "four"}>
                    44444444444<br>
                <{elseif $smarty.get.pd eq "five"}>
                    5555555555555<br>
                <{elseif $smarty.get.pd eq "six"}>
                    6666666666666<br>
                <{elseif $smarty.get.pd eq "seven"}>
                    777777777777<br>
                <{else}>			
                    <li> <h3>分类管理</h3> 
                         <ul>
                             <li><a href="<{$app}>/cat/add" target="right">添加分类</a></li>
                             <li><a href="<{$app}>/cat" target="right">编辑分类</a></li>
                         </ul>
                    <li>

                    <li> <h3>商品管理</h3> 
                         <ul>
                             <li><a href="<{$app}>/goods/add"  target="right">添加商品</a></li>
                             <li><a href="<{$app}>/goods" target="right">编辑商品</a></li>
                         </ul>
                    <li>             

                    <li> <h3>用户管理</h3> 
                         <ul>
                             <li><a href="<{$app}>/user/add"  target="right">添加用户</a></li>
                             <li><a href="<{$app}>/user" target="right">编辑用户</a></li>
                         </ul>
                    <li>             
                <{/if}>
                
            </ul>
        </body>
    </html>
    
ul内部利用模板的条件判断语句进行相应内容的输出,默认输出在最后一个<{else}>中设定。

    <{if $smarty.get.pd eq "two"}> //判断pd是否等于“two”,


[admin/views/default/index/main.tpl]
这个视图里主要放默认欢迎信息。

---
这一节主要讲了，index控制器下的 index,top,menu,main四个操作。以及它们对应的四个视图。

